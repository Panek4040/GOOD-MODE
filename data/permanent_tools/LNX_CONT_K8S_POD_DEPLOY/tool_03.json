{
  "name": "kubectl_apply_manifest_yaml_files",
  "description": "Apply Kubernetes resources from YAML manifest files declaratively",
  "pattern": "kubectl.*apply|apply.*manifest|k8s.*yaml.*apply",
  "parameters": ["manifest_path", "namespace"],
  "sequence": [
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "cat",
        "args": ["{{manifest_path}}"]
      },
      "expected_output": {
        "type": "string",
        "example": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\n  labels:\n    app: nginx\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - name: nginx\n        image: nginx:1.25\n        ports:\n        - containerPort: 80"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "kubectl",
        "args": ["apply", "-f", "{{manifest_path}}", "-n", "{{namespace}}"]
      },
      "expected_output": {
        "type": "string",
        "example": "deployment.apps/nginx-deployment created\nservice/nginx-service created\nconfigmap/nginx-config created"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "kubectl",
        "args": ["get", "all", "-n", "{{namespace}}", "-l", "app=nginx"]
      },
      "expected_output": {
        "type": "string",
        "example": "NAME                                    READY   STATUS    RESTARTS   AGE\npod/nginx-deployment-7d5f6b8c9-j4k2p   1/1     Running   0          15s\npod/nginx-deployment-7d5f6b8c9-m7n3q   1/1     Running   0          15s\npod/nginx-deployment-7d5f6b8c9-r9s5t   1/1     Running   0          15s\n\nNAME                    TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE\nservice/nginx-service   ClusterIP   10.96.245.128   <none>        80/TCP    15s\n\nNAME                               READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/nginx-deployment   3/3     3            3           15s"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "kubectl",
        "args": ["diff", "-f", "{{manifest_path}}", "-n", "{{namespace}}"]
      },
      "expected_output": {
        "type": "string",
        "example": ""
      }
    }
  ],
  "stats": {
    "uses": 0,
    "successes": 0,
    "failures": 0,
    "success_rate": 0.0
  },
  "created_by": "neural_mesh_v5.2_generator"
}
