{
  "name": "safe_delete_with_size_check",
  "description": "Delete files after verifying size and getting confirmation info",
  "pattern": "delete.*check.*size|verify.*before.*delete|safe.*remove",
  "parameters": ["file_path", "max_size_mb"],
  "sequence": [
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "size_bytes=$(stat -c %s '{{file_path}}' 2>/dev/null || echo 0); size_mb=$((size_bytes / 1024 / 1024)); echo \"File size: ${size_mb}MB\""]
      },
      "expected_output": {
        "type": "string",
        "example": "File size: 150MB"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "size_bytes=$(stat -c %s '{{file_path}}'); size_mb=$((size_bytes / 1024 / 1024)); if [ $size_mb -gt {{max_size_mb}} ]; then echo \"File too large: ${size_mb}MB > {{max_size_mb}}MB\"; else echo \"Size OK: ${size_mb}MB <= {{max_size_mb}}MB\"; fi"]
      },
      "expected_output": {
        "type": "string",
        "example": "Size OK: 150MB <= 500MB"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "stat",
        "args": ["-c", "Path: %n\nSize: %s bytes\nModified: %y\nPermissions: %a\nOwner: %U:%G", "{{file_path}}"]
      },
      "expected_output": {
        "type": "string",
        "example": "Path: /tmp/large_file.zip\nSize: 157286400 bytes\nModified: 2025-11-18 10:30:22.123456789 +0000\nPermissions: 644\nOwner: user:user"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "file_type=$(file -b '{{file_path}}'); echo \"File type: $file_type\""]
      },
      "expected_output": {
        "type": "string",
        "example": "File type: Zip archive data, at least v2.0 to extract"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "rm",
        "args": ["-v", "{{file_path}}"]
      },
      "expected_output": {
        "type": "string",
        "example": "removed '/tmp/large_file.zip'"
      }
    }
  ],
  "stats": {
    "uses": 0,
    "successes": 0,
    "failures": 0,
    "success_rate": 0.0
  },
  "created_by": "claude_generated"
}
