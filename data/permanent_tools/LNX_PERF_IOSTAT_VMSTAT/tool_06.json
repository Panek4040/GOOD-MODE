{
  "name": "free_memory_usage_swap_monitor",
  "description": "Monitor memory usage, swap, buffers, cache with free command in various formats",
  "pattern": "free.*memory|swap.*usage|memory.*available|cache.*buffers",
  "parameters": ["interval", "unit"],
  "sequence": [
    {
      "action": {"type": "system_command", "tool": "shell", "operation": "run", "command": "free", "args": ["-h"]},
      "expected_output": {"type": "string", "example": "              total        used        free      shared  buff/cache   available\nMem:          7.8Gi       3.2Gi       1.1Gi       234Mi       3.5Gi       4.1Gi\nSwap:         2.0Gi          0B       2.0Gi"}
    },
    {
      "action": {"type": "system_command", "tool": "shell", "operation": "run", "command": "free", "args": ["-m", "-t"]},
      "expected_output": {"type": "string", "example": "              total        used        free      shared  buff/cache   available\nMem:           8192        3276        1156         234        3760        4212\nSwap:          2048           0        2048\nTotal:        10240        3276        3204"}
    },
    {
      "action": {"type": "system_command", "tool": "shell", "operation": "run", "command": "bash", "args": ["-c", "free -{{unit}} -s {{interval}} -c 5"]},
      "expected_output": {"type": "string", "example": "Memory monitored every {{interval}} seconds: available dropping from 4.2GB to 3.8GB"}
    },
    {
      "action": {"type": "system_command", "tool": "shell", "operation": "run", "command": "bash", "args": ["-c", "free -h | grep Mem | awk '{print \"Used: \" $3 \" / \" $2 \" (\" int($3/$2*100) \"%)\"}'"]},
      "expected_output": {"type": "string", "example": "Used: 3.2Gi / 7.8Gi (41%) - memory utilization is healthy"}
    },
    {
      "action": {"type": "system_command", "tool": "shell", "operation": "run", "command": "bash", "args": ["-c", "free -h | grep Swap | awk '{if ($2 != \"0B\" && $3 != \"0B\") print \"WARNING: Swap in use: \" $3 \"/\" $2; else print \"Swap not in use - good performance\"}'"]},
      "expected_output": {"type": "string", "example": "Swap not in use - good performance (or) WARNING: Swap in use: 456Mi/2.0Gi - memory pressure detected"}
    }
  ],
  "stats": {"uses": 0, "successes": 0, "failures": 0, "success_rate": 0.0},
  "created_by": "neural_mesh_v5.2_generator"
}
