{
  "name": "npm_package_publishing",
  "description": "Publishing packages to npm registry for distribution",
  "sequences": [
    {
      "id": "seq_1",
      "description": "Prepare and validate package for publishing",
      "steps": [
        {
          "action": {
            "command": "npm",
            "args": ["login"]
          },
          "expected_output": "npm notice Log in on https://registry.npmjs.org/\nLogged in as username on https://registry.npmjs.org/",
          "explanation": "Authenticates with npm registry for publishing"
        },
        {
          "action": {
            "command": "npm",
            "args": ["pack", "--dry-run"]
          },
          "expected_output": "npm notice package: my-package@1.0.0\nnpm notice === Tarball Contents ===\nnpm notice 234B  index.js\nnpm notice 567B  package.json\nnpm notice === Tarball Details ===\nnpm notice size: 801B",
          "explanation": "Previews what will be included in published package"
        },
        {
          "action": {
            "command": "npm",
            "args": ["publish", "--dry-run"]
          },
          "expected_output": "npm notice Publishing to https://registry.npmjs.org/\nnpm notice package: my-package@1.0.0",
          "explanation": "Validates package can be published without actually publishing"
        }
      ]
    },
    {
      "id": "seq_2",
      "description": "Publish package and manage versions",
      "steps": [
        {
          "action": {
            "command": "npm",
            "args": ["version", "patch"]
          },
          "expected_output": "v1.0.1",
          "explanation": "Increments patch version in package.json and creates git tag"
        },
        {
          "action": {
            "command": "npm",
            "args": ["publish"]
          },
          "expected_output": "+ my-package@1.0.1",
          "explanation": "Publishes package to npm registry"
        },
        {
          "action": {
            "command": "npm",
            "args": ["view", "my-package", "versions"]
          },
          "expected_output": "[ '1.0.0', '1.0.1' ]",
          "explanation": "Lists all published versions of the package"
        }
      ]
    },
    {
      "id": "seq_3",
      "description": "Publish scoped and private packages",
      "steps": [
        {
          "action": {
            "command": "npm",
            "args": ["init", "--scope=@myorg"]
          },
          "expected_output": "package name: @myorg/my-package",
          "explanation": "Creates scoped package under organization namespace"
        },
        {
          "action": {
            "command": "npm",
            "args": ["publish", "--access=public"]
          },
          "expected_output": "+ @myorg/my-package@1.0.0",
          "explanation": "Publishes scoped package with public access"
        },
        {
          "action": {
            "command": "npm",
            "args": ["unpublish", "my-package@1.0.0"]
          },
          "expected_output": "- my-package@1.0.0",
          "explanation": "Removes specific version from registry (use cautiously)"
        }
      ]
    }
  ]
}
