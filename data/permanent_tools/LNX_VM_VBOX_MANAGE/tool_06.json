{
  "name": "vbox_modify_vm_resources_network",
  "description": "Modify VM CPU count, memory, network adapters, shared folders while powered off",
  "pattern": "modify.*vm.*settings|change.*vm.*cpu|increase.*memory|configure.*network",
  "parameters": ["vm_name", "setting_type", "setting_value"],
  "sequence": [
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "VBoxManage showvminfo '{{vm_name}}' --machinereadable | grep -E 'memory=|cpus=|nic1=|VMState='"]
      },
      "expected_output": {
        "type": "string",
        "example": "memory=4096\ncpus=2\nnic1=\"nat\"\nVMState=\"poweroff\""
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "if [ '{{setting_type}}' = 'memory' ]; then VBoxManage modifyvm '{{vm_name}}' --memory {{setting_value}}; elif [ '{{setting_type}}' = 'cpus' ]; then VBoxManage modifyvm '{{vm_name}}' --cpus {{setting_value}}; elif [ '{{setting_type}}' = 'network' ]; then VBoxManage modifyvm '{{vm_name}}' --nic1 {{setting_value}}; elif [ '{{setting_type}}' = 'bridged' ]; then VBoxManage modifyvm '{{vm_name}}' --nic1 bridged --bridgeadapter1 {{setting_value}}; fi"]
      },
      "expected_output": {
        "type": "string",
        "example": ""
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "VBoxManage showvminfo '{{vm_name}}' --machinereadable | grep -E 'memory=|cpus=|nic1='"]
      },
      "expected_output": {
        "type": "string",
        "example": "memory={{setting_value}}\ncpus={{setting_value}}\nnic1=\"{{setting_value}}\""
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "VBoxManage",
        "args": ["getextradata", "{{vm_name}}", "enumerate"]
      },
      "expected_output": {
        "type": "string",
        "example": "Key: GUI/LastCloseAction, Value: PowerOff\nKey: GUI/LastNormalWindowPosition, Value: 100,100,1024,768"
      }
    }
  ],
  "stats": {
    "uses": 0,
    "successes": 0,
    "failures": 0,
    "success_rate": 0.0
  },
  "created_by": "neural_mesh_v5.2_generator"
}
