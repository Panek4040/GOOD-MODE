{
  "name": "usermod_modify_user_properties",
  "description": "Modify existing user settings: change shell, home directory, groups, lock/unlock account",
  "pattern": "modify.*user|change.*user.*settings|usermod.*command|update.*account",
  "parameters": ["username", "setting_type", "setting_value"],
  "sequence": [
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "grep -E '^{{username}}:' /etc/passwd && id {{username}}"]
      },
      "expected_output": {
        "type": "string",
        "example": "{{username}}:x:1001:1001::/home/{{username}}:/bin/bash\nuid=1001({{username}}) gid=1001({{username}}) groups=1001({{username}}),27(sudo)"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "if [ '{{setting_type}}' = 'shell' ]; then usermod -s {{setting_value}} {{username}}; elif [ '{{setting_type}}' = 'groups' ]; then usermod -aG {{setting_value}} {{username}}; elif [ '{{setting_type}}' = 'home' ]; then usermod -d {{setting_value}} -m {{username}}; elif [ '{{setting_type}}' = 'lock' ]; then usermod -L {{username}}; elif [ '{{setting_type}}' = 'unlock' ]; then usermod -U {{username}}; elif [ '{{setting_type}}' = 'comment' ]; then usermod -c '{{setting_value}}' {{username}}; fi"]
      },
      "expected_output": {
        "type": "string",
        "example": ""
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "grep -E '^{{username}}:' /etc/passwd"]
      },
      "expected_output": {
        "type": "string",
        "example": "{{username}}:x:1001:1001:{{setting_value}}:/home/{{username}}:{{setting_value}}"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "id",
        "args": ["{{username}}"]
      },
      "expected_output": {
        "type": "string",
        "example": "uid=1001({{username}}) gid=1001({{username}}) groups=1001({{username}}),27(sudo),999(docker),{{setting_value}}"
      }
    }
  ],
  "stats": {
    "uses": 0,
    "successes": 0,
    "failures": 0,
    "success_rate": 0.0
  },
  "created_by": "neural_mesh_v5.2_generator"
}
