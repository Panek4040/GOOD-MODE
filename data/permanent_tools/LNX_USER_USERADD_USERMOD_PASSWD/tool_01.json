{
  "name": "useradd_create_user_with_settings",
  "description": "Create new user account with home directory, shell, primary/secondary groups, UID specification",
  "pattern": "create.*user|add.*account|new.*user|useradd.*command",
  "parameters": ["username", "shell", "groups"],
  "sequence": [
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "grep -E '^{{username}}:' /etc/passwd || echo 'User does not exist'"]
      },
      "expected_output": {
        "type": "string",
        "example": "User does not exist"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "useradd",
        "args": ["-m", "-s", "{{shell}}", "-G", "{{groups}}", "{{username}}"]
      },
      "expected_output": {
        "type": "string",
        "example": ""
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "grep -E '^{{username}}:' /etc/passwd"]
      },
      "expected_output": {
        "type": "string",
        "example": "{{username}}:x:1001:1001::/home/{{username}}:{{shell}}"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "id",
        "args": ["{{username}}"]
      },
      "expected_output": {
        "type": "string",
        "example": "uid=1001({{username}}) gid=1001({{username}}) groups=1001({{username}}),27(sudo),999(docker)"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": ["-c", "ls -la /home/{{username}}"]
      },
      "expected_output": {
        "type": "string",
        "example": "total 20\ndrwxr-xr-x 2 {{username}} {{username}} 4096 Nov 18 22:00 .\ndrwxr-xr-x 5 root root 4096 Nov 18 22:00 ..\n-rw-r--r-- 1 {{username}} {{username}}  220 Nov 18 22:00 .bash_logout\n-rw-r--r-- 1 {{username}} {{username}} 3526 Nov 18 22:00 .bashrc"
      }
    }
  ],
  "stats": {
    "uses": 0,
    "successes": 0,
    "failures": 0,
    "success_rate": 0.0
  },
  "created_by": "neural_mesh_v5.2_generator"
}
