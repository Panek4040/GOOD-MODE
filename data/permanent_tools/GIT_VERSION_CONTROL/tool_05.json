{
  "name": "git_undo_operations",
  "description": "Reset, revert, restore changes and undo commits",
  "pattern": "git.*reset|git.*revert|git.*restore|git.*checkout",
  "parameters": [
    "commit_hash",
    "reset_mode"
  ],
  "sequence": [
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": [
          "-c",
          "cd /tmp/test-repo && echo 'Temporary change' > temp.txt && git add temp.txt && git status --short && git restore --staged temp.txt && git status --short"
        ]
      },
      "expected_output": {
        "type": "string",
        "example": "A  temp.txt\n?? temp.txt\n\nFile unstaged"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": [
          "-c",
          "cd /tmp/test-repo && echo 'Change' >> README.md && git add README.md && git commit -m 'Temp commit' && git reset --soft HEAD~1 && git status --short"
        ]
      },
      "expected_output": {
        "type": "string",
        "example": "M  README.md\n\nCommit undone, changes staged"
      }
    },
    {
      "action": {
        "type": "system_command",
        "tool": "shell",
        "operation": "run",
        "command": "bash",
        "args": [
          "-c",
          "cd /tmp/test-repo && git log --oneline -n 1 && git revert HEAD --no-edit 2>&1 | grep -i 'revert' || echo 'Revert simulated'"
        ]
      },
      "expected_output": {
        "type": "string",
        "example": "Revert \"Add feature\"\n\nChanges reverted with new commit"
      }
    }
  ],
  "stats": {
    "uses": 0,
    "successes": 0,
    "failures": 0,
    "success_rate": 0.0
  },
  "created_by": "neural_mesh_v5.2_generator"
}
