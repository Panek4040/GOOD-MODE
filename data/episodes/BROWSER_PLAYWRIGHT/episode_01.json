{
  "title": "Cross-Browser E2E Testing with Playwright",
  "description": "Run identical test suite across Chromium, Firefox, and WebKit browsers",
  "difficulty": "intermediate",
  "estimated_time": "55 minutes",
  "tools_used": ["playwright", "chromium", "firefox", "webkit"],
  "attack_chain": [
    {"step": 1, "title": "Define Multi-Browser Test", "command": "const { chromium, firefox, webkit } = require('playwright'); const browsers = [chromium, firefox, webkit]; const results = [];", "explanation": "Setup test to run on all three browsers", "expected_output": "Browser types defined", "success_criteria": "Arrays initialized"},
    {"step": 2, "title": "Launch All Browsers", "command": "for (const browserType of browsers) { const browser = await browserType.launch({headless: true}); const context = await browser.newContext(); const page = await context.newPage(); console.log(`Launched: ${browserType.name()}`); results.push({browser: browserType.name(), page, context, browserInstance: browser}); }", "explanation": "Start Chromium, Firefox, and WebKit instances", "expected_output": "Launched: chromium, firefox, webkit", "success_criteria": "3 browsers running"},
    {"step": 3, "title": "Test Login Across Browsers", "command": "for (const {browser, page} of results) { await page.goto('https://the-internet.herokuapp.com/login'); await page.locator('#username').fill('tomsmith'); await page.locator('#password').fill('SuperSecretPassword!'); await page.locator('button[type=\"submit\"]').click(); await page.waitForURL('**/secure'); console.log(`${browser}: Login successful`); }", "explanation": "Verify login works identically on all browsers", "expected_output": "chromium: Login successful, firefox: Login successful, webkit: Login successful", "success_criteria": "All logins pass"},
    {"step": 4, "title": "Test Form Interactions", "command": "for (const {browser, page} of results) { await page.goto('https://the-internet.herokuapp.com/checkboxes'); const checkboxes = await page.locator('input[type=\"checkbox\"]').all(); for (const cb of checkboxes) { await cb.check(); } const allChecked = await page.locator('input[type=\"checkbox\"]:checked').count(); console.log(`${browser}: ${allChecked} checkboxes checked`); }", "explanation": "Test checkbox interactions across browsers", "expected_output": "chromium: 2 checkboxes checked, firefox: 2, webkit: 2", "success_criteria": "Consistent behavior"},
    {"step": 5, "title": "Test Dropdown Selection", "command": "for (const {browser, page} of results) { await page.goto('https://the-internet.herokuapp.com/dropdown'); await page.selectOption('#dropdown', 'Option 1'); const selected = await page.locator('#dropdown').inputValue(); console.log(`${browser}: Selected ${selected}`); }", "explanation": "Verify dropdown works on all browsers", "expected_output": "chromium: Selected 1, firefox: Selected 1, webkit: Selected 1", "success_criteria": "Selection works"},
    {"step": 6, "title": "Test JavaScript Alert Handling", "command": "for (const {browser, page} of results) { await page.goto('https://the-internet.herokuapp.com/javascript_alerts'); page.once('dialog', dialog => dialog.accept()); await page.click('button:has-text(\"Click for JS Alert\")'); console.log(`${browser}: Alert handled`); }", "explanation": "Confirm alert handling across browsers", "expected_output": "chromium: Alert handled, firefox: Alert handled, webkit: Alert handled", "success_criteria": "Alerts accepted"},
    {"step": 7, "title": "Capture Cross-Browser Screenshots", "command": "for (const {browser, page} of results) { await page.goto('https://example.com'); await page.screenshot({path: `/tmp/${browser}_screenshot.png`, fullPage: true}); console.log(`${browser}: Screenshot saved`); }", "explanation": "Visual comparison of rendering", "expected_output": "chromium: Screenshot saved, firefox: Screenshot saved, webkit: Screenshot saved", "success_criteria": "3 images created"},
    {"step": 8, "title": "Test Network Performance", "command": "for (const {browser, page} of results) { const start = Date.now(); await page.goto('https://jsonplaceholder.typicode.com/posts'); const loadTime = Date.now() - start; console.log(`${browser}: Load time ${loadTime}ms`); }", "explanation": "Compare page load performance", "expected_output": "chromium: Load time 250ms, firefox: Load time 280ms, webkit: Load time 270ms", "success_criteria": "All browsers load"},
    {"step": 9, "title": "Test Mobile Responsiveness", "command": "const { devices } = require('playwright'); for (const {browser, context, browserInstance} of results) { const mobileContext = await browserInstance.newContext(devices['iPhone 12']); const mobilePage = await mobileContext.newPage(); await mobilePage.goto('https://example.com'); const width = await mobilePage.evaluate(() => window.innerWidth); console.log(`${browser}: Mobile width ${width}px`); await mobileContext.close(); }", "explanation": "Verify mobile emulation across browsers", "expected_output": "chromium: Mobile width 390px, firefox: Mobile width 390px, webkit: Mobile width 390px", "success_criteria": "Consistent mobile views"},
    {"step": 10, "title": "Generate Test Report and Cleanup", "command": "const fs = require('fs'); const report = {timestamp: new Date(), browsers: results.map(r => r.browser), allTestsPassed: true}; fs.writeFileSync('/tmp/cross_browser_report.json', JSON.stringify(report, null, 2)); console.log('Report generated'); for (const {browserInstance} of results) { await browserInstance.close(); } console.log('All browsers closed');", "explanation": "Export results and close all browsers", "expected_output": "Report generated, All browsers closed", "success_criteria": "Clean shutdown"}
  ],
  "learning_objectives": ["Multi-browser testing", "Cross-browser compatibility", "Playwright browser APIs", "Parallel testing", "Visual regression"],
  "mitigation": ["Not applicable - legitimate testing"],
  "tags": ["playwright", "cross-browser", "e2e", "testing", "automation"]
}
