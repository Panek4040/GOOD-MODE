{
  "episode_id": "LNX_CONT_DOCKER_BUILD_RUN_EP02",
  "title": "Multi-Container Microservices Deployment",
  "description": "Deploy web app + database using docker-compose, configure networking and environment variables",
  "difficulty": "advanced",
  "steps": [
    {
      "step_number": 1,
      "instruction": "Deploy multi-container application with web frontend and PostgreSQL database",
      "tool": "docker_compose_multi_container_orchestration",
      "parameters": {
        "compose_file_path": "/home/user/microservices/docker-compose.yml",
        "project_name": "myapp"
      },
      "expected_outcome": "Services myapp-web-1 and myapp-db-1 running with shared network"
    },
    {
      "step_number": 2,
      "instruction": "Verify database container is running with correct environment variables",
      "tool": "docker_inspect_logs_container_diagnostics",
      "parameters": {
        "container_name": "myapp-db-1",
        "log_lines": "30"
      },
      "expected_outcome": "PostgreSQL logs show database initialization complete"
    },
    {
      "step_number": 3,
      "instruction": "Execute database migration script inside web container",
      "tool": "docker_exec_interactive_shell_commands",
      "parameters": {
        "container_name": "myapp-web-1",
        "shell_command": "python manage.py migrate --database=default"
      },
      "expected_outcome": "Database migrations applied successfully"
    },
    {
      "step_number": 4,
      "instruction": "Test database connectivity from web container",
      "tool": "docker_exec_interactive_shell_commands",
      "parameters": {
        "container_name": "myapp-web-1",
        "shell_command": "pg_isready -h db -p 5432 -U postgres"
      },
      "expected_outcome": "PostgreSQL accepting connections on db:5432"
    },
    {
      "step_number": 5,
      "instruction": "Check web application resource usage and performance",
      "tool": "docker_inspect_logs_container_diagnostics",
      "parameters": {
        "container_name": "myapp-web-1",
        "log_lines": "20"
      },
      "expected_outcome": "Application serving requests, CPU < 10%, memory < 200MB"
    }
  ],
  "success_criteria": "All services running, database connected, migrations applied, app responsive",
  "cleanup": "docker-compose -f /home/user/microservices/docker-compose.yml -p myapp down -v"
}
