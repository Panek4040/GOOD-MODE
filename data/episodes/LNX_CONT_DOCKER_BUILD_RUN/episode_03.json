{
  "episode_id": "LNX_CONT_DOCKER_BUILD_RUN_EP03",
  "title": "Container Resource Limits and Network Isolation",
  "description": "Deploy container with memory/CPU limits on custom network, monitor performance, troubleshoot",
  "difficulty": "advanced",
  "steps": [
    {
      "step_number": 1,
      "instruction": "Run container with strict resource limits and custom network isolation",
      "tool": "docker_run_with_env_network_limits",
      "parameters": {
        "image_name": "stress-ng:latest",
        "container_name": "resource-test",
        "network_name": "isolated-net",
        "memory_limit": "512m",
        "cpu_limit": "1.5"
      },
      "expected_outcome": "Container running with 512MB memory limit and 1.5 CPU cores on isolated-net"
    },
    {
      "step_number": 2,
      "instruction": "Verify resource constraints are applied correctly",
      "tool": "docker_inspect_logs_container_diagnostics",
      "parameters": {
        "container_name": "resource-test",
        "log_lines": "15"
      },
      "expected_outcome": "Container stats show memory capped at 512MB, CPU usage capped at 150%"
    },
    {
      "step_number": 3,
      "instruction": "Execute stress test inside container to verify limits",
      "tool": "docker_exec_interactive_shell_commands",
      "parameters": {
        "container_name": "resource-test",
        "shell_command": "stress-ng --vm 2 --vm-bytes 256M --timeout 10s"
      },
      "expected_outcome": "Stress test completes without OOM kill, memory stays under 512MB"
    },
    {
      "step_number": 4,
      "instruction": "Check container network connectivity on isolated network",
      "tool": "docker_exec_interactive_shell_commands",
      "parameters": {
        "container_name": "resource-test",
        "shell_command": "ip addr show && ip route"
      },
      "expected_outcome": "Container has IP on isolated-net subnet, default route via gateway"
    },
    {
      "step_number": 5,
      "instruction": "Stop and remove container, verify cleanup",
      "tool": "docker_container_lifecycle_stop_remove",
      "parameters": {
        "container_name": "resource-test"
      },
      "expected_outcome": "Container stopped gracefully and removed from system"
    }
  ],
  "success_criteria": "Resource limits enforced, network isolated, stress test passed, clean removal",
  "cleanup": "docker network rm isolated-net"
}
